{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { insertAuth, fetchAuth, deleteAuth } from \"../../db/index\";\nexport var AUTH = \"AUTH\";\nexport var LOAD_AUTH = \"LOAD_AUTH\";\nexport var DELETE_AUTH = \"DELETE_AUTH\";\nexport var authAction = function authAction(userName, token, email) {\n  return function _callee(dispatch) {\n    var auth;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(insertAuth(userName, token, email));\n\n          case 3:\n            auth = _context.sent;\n            dispatch({\n              type: AUTH,\n              data: {\n                userName: userName,\n                token: token,\n                email: email\n              }\n            });\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            throw _context.t0;\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};\nexport var loadAuth = function loadAuth() {\n  return function _callee2(dispatch) {\n    var result, data;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(fetchAuth());\n\n          case 3:\n            result = _context2.sent;\n\n            if (result.rows.length == 1) {\n              data = result.rows._array[0];\n              dispatch({\n                type: AUTH,\n                data: data\n              });\n            }\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            throw _context2.t0;\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};\nexport var authDelete = function authDelete(userName, token, email) {\n  return function _callee3(dispatch) {\n    var auth;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(deleteAuth());\n\n          case 3:\n            auth = _context3.sent;\n            dispatch({\n              type: DELETE_AUTH\n            });\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            throw _context3.t0;\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};","map":{"version":3,"sources":["/Users/mati/CoderHouse/APP/1-intro/5-proyect/store/actions/auth.action.js"],"names":["insertAuth","fetchAuth","deleteAuth","AUTH","LOAD_AUTH","DELETE_AUTH","authAction","userName","token","email","dispatch","auth","type","data","loadAuth","result","rows","length","_array","authDelete"],"mappings":";AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,UAAhC;AACA,OAAO,IAAMC,IAAI,GAAG,MAAb;AACP,OAAO,IAAMC,SAAS,GAAG,WAAlB;AACP,OAAO,IAAMC,WAAW,GAAG,aAApB;AAEP,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,QAAD,EAAWC,KAAX,EAAkBC,KAAlB,EAA4B;AACpD,SAAO,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEgBV,UAAU,CAACO,QAAD,EAAWC,KAAX,EAAkBC,KAAlB,CAF1B;;AAAA;AAEGE,YAAAA,IAFH;AAGHD,YAAAA,QAAQ,CAAC;AAAEE,cAAAA,IAAI,EAAET,IAAR;AAAcU,cAAAA,IAAI,EAAE;AAAEN,gBAAAA,QAAQ,EAARA,QAAF;AAAYC,gBAAAA,KAAK,EAALA,KAAZ;AAAmBC,gBAAAA,KAAK,EAALA;AAAnB;AAApB,aAAD,CAAR;AAHG;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAQD,CATM;AAWP,OAAO,IAAMK,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAC5B,SAAO,kBAAOJ,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEkBT,SAAS,EAF3B;;AAAA;AAEGc,YAAAA,MAFH;;AAIH,gBAAIA,MAAM,CAACC,IAAP,CAAYC,MAAZ,IAAsB,CAA1B,EAA6B;AACrBJ,cAAAA,IADqB,GACdE,MAAM,CAACC,IAAP,CAAYE,MAAZ,CAAmB,CAAnB,CADc;AAE3BR,cAAAA,QAAQ,CAAC;AAAEE,gBAAAA,IAAI,EAAET,IAAR;AAAcU,gBAAAA,IAAI,EAAEA;AAApB,eAAD,CAAR;AACD;;AAPE;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAYD,CAbM;AAeP,OAAO,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACZ,QAAD,EAAWC,KAAX,EAAkBC,KAAlB,EAA4B;AACpD,SAAO,kBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEgBR,UAAU,EAF1B;;AAAA;AAEGS,YAAAA,IAFH;AAGHD,YAAAA,QAAQ,CAAC;AAAEE,cAAAA,IAAI,EAAEP;AAAR,aAAD,CAAR;AAHG;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAQD,CATM","sourcesContent":["import { insertAuth, fetchAuth, deleteAuth } from \"../../db/index\";\nexport const AUTH = \"AUTH\";\nexport const LOAD_AUTH = \"LOAD_AUTH\";\nexport const DELETE_AUTH = \"DELETE_AUTH\";\n\nexport const authAction = (userName, token, email) => {\n  return async (dispatch) => {\n    try {\n      const auth = await insertAuth(userName, token, email);\n      dispatch({ type: AUTH, data: { userName, token, email } });\n    } catch (error) {\n      throw error;\n    }\n  };\n};\n\nexport const loadAuth = () => {\n  return async (dispatch) => {\n    try {\n      const result = await fetchAuth();\n\n      if (result.rows.length == 1) {\n        const data = result.rows._array[0];\n        dispatch({ type: AUTH, data: data });\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n};\n\nexport const authDelete = (userName, token, email) => {\n  return async (dispatch) => {\n    try {\n      const auth = await deleteAuth();\n      dispatch({ type: DELETE_AUTH });\n    } catch (error) {\n      throw error;\n    }\n  };\n};\n"]},"metadata":{},"sourceType":"module"}